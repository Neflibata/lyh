<!DOCTYPE HTML>
<html>
<head>
    <meta name="viewport" content="width=device-width initial-scale=1.0 maximum-scale=1.0 user-scalable=0">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>区域掩模</title>
    <style>
        body,html,#container{ margin:0;width: 100%;height: 100%}
    </style>
</head>
<body>
<div id="container"></div>
<script language="javascript" src="https://webapi.amap.com/maps?v=1.4.15&key=558c527fc7b0e5df0b159af3edeaec32&plugin=Map3D,AMap.DistrictSearch"></script>
<script language="javascript">
    //区域地图
    var opts = {
        subdistrict: 0,
        extensions: 'all',
        level: 'city'
    };
    var district = new AMap.DistrictSearch(opts);
    district.search('临海市', function(status, result) {
        // var bounds = result.districtList[0].boundaries;
        var bounds=[]
        bounds[0] = [[120.95054995200007,28.720028370000023],[120.95811560700008,28.72438081000007],[120.96080283000003,28.72639510600004],[120.97104621400001,28.73160144700006],[120.97759462600004,28.73311235400007],[120.98162479400003,28.735127487000057],[120.98515129500004,28.738989635000053],[120.98834186900001,28.74201217500007],[120.99102814600008,28.74469934700005],[120.99371531800011,28.747889118000046],[120.9980813740001,28.751583409000034],[121.00345462700011,28.757125346000066],[121.01470488100006,28.753765905000023],[121.02024677400004,28.75309523900006],[121.02494792300001,28.753598617000023],[121.02813941500006,28.75427039400006],[121.0298178490001,28.756453391000036],[121.03082446500002,28.758804111000074],[121.03284077100011,28.763506601000074],[121.03586326100003,28.766696670000044],[121.03703853900004,28.769214990000023],[121.03905358600002,28.769383924000067],[121.0415724070001,28.768711375000066],[121.04560156200012,28.765521372000023],[121.04963321200012,28.763842864000026],[121.0635703050001,28.76350683100003],[121.06810432100008,28.761491689000025],[121.07095788100003,28.75930852700003],[121.0736449850001,28.758300098000063],[121.07817898100006,28.75981153200007],[121.08103354600007,28.763170848000073],[121.08338411500006,28.764849007000066],[121.08640656300008,28.765017088000036],[121.09312372800002,28.76333870700006],[121.09614587700003,28.760987836000027],[121.10437436200004,28.760987554000053],[121.10874014300009,28.76451368800008],[121.1131059710001,28.766024981000044],[121.11428161600008,28.76636050700006],[121.11596070700011,28.766025912000032],[121.11814344600009,28.76384210200007],[121.12099913100008,28.759644450000053],[121.12099944900001,28.75561319600007],[121.1209987530001,28.75175181000003],[121.12251024000011,28.750408144000062],[121.12402082900007,28.74889766700005],[121.12553241600006,28.748561478000056],[121.12738030800006,28.750240390000044],[121.13124195400007,28.750072120000027],[121.13342490600007,28.748729832000038],[121.13644635300011,28.745538085000078],[121.13896618500007,28.744027711000058],[121.14198898200004,28.742684153000027],[121.14635516200008,28.74285197100005],[121.1485381760001,28.739661702000035],[121.15072032700004,28.73596684000006],[121.1532391720001,28.732440521000058],[121.15491840900006,28.730761581000024],[121.15643034800007,28.729418156000065],[121.15928396600009,28.727066853000053],[121.1609643160001,28.72572380500003],[121.1623071140001,28.72337380600004],[121.16457197700004,28.718007470000032],[121.16134495500012,28.714227894000032],[121.15900263500009,28.711635245000025],[121.1573245830001,28.709718414000065],[121.15594403400007,28.70899539100003],[121.15339433700001,28.708473205000075],[121.14895539300005,28.707988881000063],[121.14542938200009,28.707426422000026],[121.14224114700005,28.707545309000068],[121.13994459500009,28.706909221000046],[121.13809090500001,28.705503381000028],[121.13549732700005,28.703321086000074],[121.13074303300004,28.70301105300007],[121.12788957900011,28.703414389000045],[121.12676129700003,28.703530039000043],[121.12587532400005,28.703621007000038],[121.12456398300003,28.703188882000063],[121.12184649500011,28.701292360000025],[121.11782631500012,28.69908021300006],[121.11524664500007,28.697520234000024],[121.11240913000006,28.695974345000025],[121.10175088100004,28.68854588000005],[121.09718059000011,28.685424528000055],[121.09358774400005,28.68468742600004],[121.09235126900012,28.68471569700006],[121.09151165300011,28.684956787000033],[121.0890709250001,28.68626585900006],[121.08632469100007,28.688103037000076],[121.08557632600002,28.687495816000023],[121.08439338900007,28.686533101000066],[121.08198981600003,28.683991254000034],[121.07909917400002,28.680324746000053],[121.07728252100003,28.677773900000034],[121.07559685400008,28.675340990000052],[121.07459824300008,28.67466842300007],[121.0727668610001,28.67419171800003],[121.06885994900006,28.673865696000064],[121.06255129200008,28.67404570000008],[121.05836175400009,28.675500803000034],[121.05563873300002,28.67577754200005],[121.05399058400008,28.675004106000074],[121.05212117700012,28.673038916000053],[121.05066403800004,28.669220092000046],[121.0495878270001,28.66792406500008],[121.04781740100009,28.66726718500007],[121.04535386900011,28.667655340000067],[121.04331032900006,28.669015165000076],[121.0399815500001,28.67120469300005],[121.03673306900009,28.671382536000067],[121.0337192820001,28.67051768500005],[121.0308423140001,28.66988157700007],[121.02981355500003,28.670244103000073],[121.02841592200002,28.671766969000032],[121.02831693100006,28.675779869000053],[121.02814125400005,28.678942465000034],[121.02745438700003,28.680159607000064],[121.02651741800003,28.680501968000044],[121.02629613700003,28.680584527000065],[121.02440141300008,28.68033093100007],[121.02144343400005,28.679070025000044],[121.01743825300002,28.677595435000057],[121.01523290500006,28.677697826000042],[121.01439281300009,28.678056087000073],[121.01234887700002,28.679586228000062],[121.01181275500005,28.679775710000058],[121.00925076700003,28.680677830000036],[121.00532884200004,28.679771190000054],[121.00284180000006,28.679302003000032],[121.00207154400005,28.67960615800007],[121.00170578300003,28.680584683000063],[121.00249869400011,28.68372539300003],[121.00223148200007,28.685967851000044],[121.00180491300011,28.687296341000035],[121.00085126900001,28.68823866400004],[120.99930975100006,28.689009876000057],[120.99516754900003,28.689949864000027],[120.99142780600005,28.691219372000035],[120.98917769700006,28.692412386000058],[120.98803366000004,28.69340618900003],[120.98667519800006,28.696533300000056],[120.98436317500011,28.69777934900003],[120.98167135900007,28.69926428000008],[120.97846610200008,28.701390165000078],[120.9735143480001,28.703778533000047],[120.96925688600004,28.70523012700005],[120.96609760700005,28.706319696000037],[120.96286426800009,28.707073395000066],[120.96046819800006,28.707740840000042],[120.95867521200012,28.70881344000003],[120.95637147200011,28.71034781700007],[120.95389091300001,28.71302568300007],[120.95145689200001,28.71709234700006],[120.95054995200007,28.720028370000023]];
        var mask = []
        for(var i =0;i<bounds.length;i+=1){
            mask.push([bounds[i]])
        }
        var map = new AMap.Map('container', {
            mask:mask,
            center:[121.109333,28.714452],
            disableSocket:true,
            viewMode:'3D',
            showLabel:false,
            labelzIndex:130,
            pitch:20,
            zoom:12.5,
            layers:[
                new AMap.TileLayer.RoadNet({
                }),
                new AMap.TileLayer.Satellite()
            ]
        });
        //添加高度面
        var object3Dlayer = new AMap.Object3DLayer({zIndex:1});
        map.add(object3Dlayer)
        var height = -4000;
        var color = '#0088ffcc';//0088ffcc
        var wall = new AMap.Object3D.Wall({
            path:bounds,
            height:height,
            color:color
        });
        wall.transparent = true
        object3Dlayer.add(wall)

        var marker = new AMap.Marker({
            position:[121.109333,28.714452],
            map: map,
            offset: new AMap.Pixel(-13, -30)
        });
        marker.content = '';
        marker.on('click', markerClick);
        marker.emit('click', {target: marker});
        marker.setMap(map)
    });


</script>
</body>
</html>